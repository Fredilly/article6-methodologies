# RC-20260102-162359 â€” CI idempotency: scripts_manifest.json drift after adding pack script
- Date: 2026-01-02
- Area: ci
Tags: [ci, determinism]

## Symptom
CI idempotency + stage-gates failed with a git diff showing scripts_manifest.json being modified.

## Root cause
A new script (scripts/pack-methodologies.sh) was added but scripts_manifest.json was not regenerated/committed, so hash-scripts.sh rewrote it during the gate run.

## Fix
Regenerated scripts_manifest.json deterministically so it includes the new script entry and no longer drifts during CI.

## Proof / tests
bash scripts/ci-idempotency-agriculture.sh && bash scripts/ci-idempotency-forestry.sh; validate:rich/lean; check-source-hash; check-trio-and-registry; check-quality-gates

## Follow-ups
- [ ] Consider adding a pre-commit/CI guard that fails if scripts/ or core/ changes without scripts_manifest.json updates.
